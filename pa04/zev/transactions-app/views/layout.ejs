<!DOCTYPE html>
<html class="h-full overflow-auto" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transactions</title>
    <script
      src="https://kit.fontawesome.com/d6c5b3a810.js"
      crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
        if (
          localStorage.theme == "dark" ||
          (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }

        let isDarkMode = document.documentElement.classList.contains("dark");

        const darkModeToggle = document.querySelector("#dark-mode-toggle");

        darkModeToggle.addEventListener("click", () => {
          document.documentElement.classList.toggle("dark");
          if (localStorage.theme === "dark") {
            localStorage.theme = "light";
            isDarkMode = false;
          } else {
            localStorage.theme = "dark";
            isDarkMode = true;
          }
        });
      });
    </script>
  </head>
  <body
    class="h-full min-h-screen w-full overflow-auto duration-200 dark:bg-slate-900">
    <nav
      class="sticky left-0 top-0 z-20 w-full border-b-2 border-sky-400 bg-white dark:bg-slate-900">
      <div class="flex justify-between">
        <div
          class="flex max-w-screen-xl flex-row flex-wrap items-center gap-3 p-4">
          <p class="font-bold dark:text-slate-100">Transactions App</p>
          <a
            class="text-black text-opacity-75 duration-200 hover:text-opacity-100 dark:text-slate-300 dark:text-opacity-75"
            href="/"
            >Home</a
          >
          <% if (!loggedIn) {%>
          <a
            class="text-black text-opacity-75 duration-200 hover:text-opacity-100 dark:text-slate-300 dark:text-opacity-75"
            href="/login"
            >Login</a
          >
          <% } else { %>
          <a
            class="text-black text-opacity-75 duration-200 hover:text-opacity-100 dark:text-slate-300 dark:text-opacity-75"
            href="/transactions"
            >Transactions</a
          >
          <p
            class="text-black text-opacity-75 dark:text-slate-300 dark:text-opacity-75">
            <%= user.username.charAt(0).toUpperCase() + user.username.slice(1)
            %>
          </p>
          <% } %>
        </div>
        <div
          class="flex max-w-screen-xl flex-row flex-wrap items-center justify-end gap-3 p-4">
          <button
            id="dark-mode-toggle"
            class="text-black opacity-75 duration-200 hover:opacity-100 dark:text-white dark:hover:opacity-100">
            <i class="fa-regular fa-moon"></i>
          </button>
          <% if (loggedIn) {%>
          <a
            class="text-black text-opacity-75 duration-200 hover:text-opacity-100 dark:text-slate-300 dark:text-opacity-75"
            href="/logout"
            >Logout</a
          >
          <% } %>
        </div>
      </div>
    </nav>
    <div
      class="h-min-content flex h-full w-full flex-1 flex-col overflow-auto pb-20">
      <div class="flex h-full w-full justify-center dark:bg-slate-900">
        <div
          class="h-full w-full p-4 dark:bg-slate-900 dark:text-slate-100 md:max-w-[70%]">
          <%- body %>
        </div>
      </div>
    </div>
  </body>
</html>
